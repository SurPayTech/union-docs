---
sidebar_label: Payments
sidebar_position: 4
---

# Payments

The payment process begins with Payment In-Progress API.

## Get Transfer Info By Transfer Reference Code

This endpoint is used for checking the transfer information before the payment
processes using Transfer Reference Code by the receiver member.

#### URL

```
GET /union-service/payments/transfer-info-by-transfer-reference-code
```

#### Request Fields

| Name                    | Located in | Description                    | Required | Schema |
| ----------------------- | ---------- | ------------------------------ | -------- | ------ |
| memberCode              | query      | Member code.                   | No       | string |
| transfer-reference-code | query      | Unique code of the transaction | Yes      | string |
| pin                     | query      | Pin generated by system.       | Yes      | string |
| api-version             | query      | The requested API version      | No       | string |

#### Response Fields

| Name                        | Located in | Description                                                                                                           | Required | Schema    |
| --------------------------- | ---------- | --------------------------------------------------------------------------------------------------------------------- | -------- | --------- |
| memberTransferReferenceCode | Body       | Unique code of the transaction by member                                                                              | Yes      | string    |
| senderLegalFullName         | Body       | Sender's legal full name                                                                                              | Yes      | string    |
| receiverLegalFullName       | Body       | Receiver's legal full name                                                                                            | Yes      | string    |
| receiverPhoneNumber         | Body       | Receiver's phone number                                                                                               | No       | string    |
| description                 | Body       | Optional description for money transfer                                                                               | No       | string    |
| sendCurrencyCode            | Body       | Currency code for money send                                                                                          | Yes      | string    |
| sendAmount                  | Body       | Amount to send                                                                                                        | Yes      | decimal   |
| senderCountryCode           | Body       | Sender's country code                                                                                                 | Yes      | string    |
| receiveInCountryCode        | Body       | Receiver's country code                                                                                               | Yes      | string    |
| transferReferenceCode       | Body       | Unique code of the transaction                                                                                        | Yes      | string    |
| status                      | Body       | Initializing, Authorized, Unknown, TransferStatus, BankFailed, Reversed, CanceledBySender, InProgress, Returned, Paid | Yes      | enum      |
| feeCurrencyCode             | Body       | Currency code for the fee                                                                                             | Yes      | string    |
| transferDate                | Body       | Date of the transfer                                                                                                  | Yes      | date-time |
| receiverFeeAmountEarned     | Body       | Amount earned by the receiver                                                                                         | Yes      | decimal   |
| paymentDate                 | Body       | Date of payment                                                                                                       | Yes      | date-time |
| receiverFeeAmountToBeEarned | Body       | Fee to be earned if payment is made                                                                                   | Yes      | decimal   |
| senderMember.businessName   | Body       | Business name of the sender                                                                                           | No       | string    |
| senderMember.memberCode     | Body       | Member code of the sender                                                                                             | No       | string    |

#### Response Codes

| Code | Description              |
| ---- | ------------------------ |
| 200  | Get transfer infos       |
| 400  | Problem details          |
| 404  | Transfer infos not found |
| 500  | Internal Error           |

#### Example Request

```
https://{{environment}}.com/union-service/payments/transfer-info-by-transfer-reference-code?transfer-reference-code={{transferReferenceCode}}&pin={{pin}}&api-version=1.0
```

#### Example Response

```json
{
  "memberTransferReferenceCode": "ffabca20-9095-4222-97ae-53e1a2240001",
  "senderLegalFullName": "John Doe",
  "receiverLegalFullName": "John Doe",
  "receiverPhoneNumber": "+905555555555",
  "description": "Payment for the dog clothes",
  "sendCurrencyCode": "USD",
  "sendAmount": 9559.25,
  "senderCountryCode": "TR",
  "receiveInCountryCode": "US",
  "transferReferenceCode": "UNpS-osjY-Poov",
  "status": "Initializing",
  "feeCurrencyCode": "USD",
  "transferDate": "2001-05-24 14:03:28",
  "receiverFeeAmountEarned": 10.95,
  "paymentDate": "2001-05-24 14:03:28",
  "receiverFeeAmountToBeEarned": 10.95,
  "senderMember": {
    "businessName": "Example Business",
    "memberCode": "123456"
  }
}
```

## Get Transfer Info By Transfer Member Reference Code

This endpoint is used for checking the transfer information before the payment
processes using Member Transfer Reference Code by the receiver member.

#### URL

```
GET /union-service/payments/transfer-info-by-transfer-member-reference-code
```

#### Request Fields

| Name                           | Located in | Description                    | Required | Schema |
| ------------------------------ | ---------- | ------------------------------ | -------- | ------ |
| memberCode                     | query      | Member code.                   | No       | string |
| transfer-member-reference-code | query      | Unique code of the transaction | Yes      | string |
| pin                            | query      | Pin generated by system.       | Yes      | string |
| api-version                    | query      | The requested API version      | No       | string |

#### Response Fields

| Name                        | Located in | Description                                                                                                           | Required | Schema    |
| --------------------------- | ---------- | --------------------------------------------------------------------------------------------------------------------- | -------- | --------- |
| memberTransferReferenceCode | Body       | Unique code of the transaction by member                                                                              | Yes      | string    |
| senderLegalFullName         | Body       | Sender's legal full name                                                                                              | Yes      | string    |
| receiverLegalFullName       | Body       | Receiver's legal full name                                                                                            | Yes      | string    |
| receiverPhoneNumber         | Body       | Receiver's phone number                                                                                               | No       | string    |
| description                 | Body       | Optional description for money transfer                                                                               | No       | string    |
| sendCurrencyCode            | Body       | Currency code for money send                                                                                          | Yes      | string    |
| sendAmount                  | Body       | Amount to send                                                                                                        | Yes      | decimal   |
| senderCountryCode           | Body       | Sender's country code                                                                                                 | Yes      | string    |
| receiveInCountryCode        | Body       | Receiver's country code                                                                                               | Yes      | string    |
| transferReferenceCode       | Body       | Unique code of the transaction                                                                                        | Yes      | string    |
| status                      | Body       | Initializing, Authorized, Unknown, TransferStatus, BankFailed, Reversed, CanceledBySender, InProgress, Returned, Paid | Yes      | enum      |
| feeCurrencyCode             | Body       | Currency code for the fee                                                                                             | Yes      | string    |
| transferDate                | Body       | Date of the transfer                                                                                                  | Yes      | date-time |
| receiverFeeAmountEarned     | Body       | Amount earned by the receiver                                                                                         | Yes      | decimal   |
| paymentDate                 | Body       | Date of payment                                                                                                       | Yes      | date-time |
| receiverFeeAmountToBeEarned | Body       | Fee to be earned if payment is made                                                                                   | Yes      | decimal   |
| senderMember.businessName   | Body       | Business name of the sender                                                                                           | No       | string    |
| senderMember.memberCode     | Body       | Member code of the sender                                                                                             | No       | string    |

#### Response Codes

| Code | Description              |
| ---- | ------------------------ |
| 200  | Get transfer infos       |
| 400  | Problem details          |
| 404  | Transfer infos not found |
| 500  | Internal Error           |

#### Example Request

```
https://{{environment}}.com/union-service/payments/transfer-info-by-transfer-reference-code?transfer-member-reference-code={{memberTransferCode}}&pin={{pin}}&api-version=1.0
```

#### Example Response

```json
{
  "memberTransferReferenceCode": "ffabca20-9095-4222-97ae-53e1a2240001",
  "senderLegalFullName": "John Doe",
  "receiverLegalFullName": "John Doe",
  "receiverPhoneNumber": "+905555555555",
  "description": "Payment for the dog clothes",
  "sendCurrencyCode": "USD",
  "sendAmount": 9559.25,
  "senderCountryCode": "TR",
  "receiveInCountryCode": "US",
  "transferReferenceCode": "UNpS-osjY-Poov",
  "status": "Initializing",
  "feeCurrencyCode": "USD",
  "transferDate": "2001-05-24 14:03:28",
  "receiverFeeAmountEarned": 10.95,
  "paymentDate": "2001-05-24 14:03:28",
  "receiverFeeAmountToBeEarned": 10.95,
  "senderMember": {
    "businessName": "Example Business",
    "memberCode": "123456"
  }
}
```

## Marks Payment InProgress

Marks payment in progress for a specified amount of time. This prevents multiple
payments from different locations.The suggested use is to call this API when the
customer is at the counter of the member’s agency. This will prevent the processing
of the payment from another agency. It can be manually canceled, automatically
after configured duration or Payment Done API has called.

#### URL

```
PUT /union-service/payments/in-progress
```

#### Request Fields

| Name                  | Located in | Description                    | Required | Schema |
| --------------------- | ---------- | ------------------------------ | -------- | ------ |
| memberCode            | Body       | Member code.                   | No       | string |
| branchCode            | Body       | Branch Code                    | Yes      | string |
| transferReferenceCode | Body       | Unique code of the transaction | Yes      | string |
| pin                   | Body       | Pin generated by system        | Yes      | string |
| api-version           | query      | The requested API version      | No       | string |

#### Response Fields

| Name                        | Located in | Description                         | Required | Schema |
| --------------------------- | ---------- | ----------------------------------- | -------- | ------ |
| FeeCurrencyCode             | Body       | Currency code for the fee           | Yes      | string |
| ReceiverFeeAmountToBeEarned | Body       | Fee to be earned if payment is made | Yes      | number |
| Status                      | Body       | Current status of the transfer      | Yes      | string |
| TransferReferenceCode       | Body       | Unique code of the transaction      | Yes      | string |
| ReceiverLegalFullName       | Body       | Receiver's legal full name          | Yes      | string |
| ReceiverPhoneNumber         | Body       | Receiver's phone number             | Yes      | string |
| Pin                         | Body       | Pin for authentication              | Yes      | string |
| SenderLegalFullName         | Body       | Sender's legal full name            | Yes      | string |

#### Response Codes

| Code | Description                             |
| ---- | --------------------------------------- |
| 200  | Mark transaction processing in progress |
| 400  | Problem details                         |
| 404  | Transfer not found                      |
| 500  | Internal Error                          |

#### Example Request

```json
{
  "memberCode": "testMember",
  "branchCode": "1212-0001",
  "transferReferenceCode": "UN1989062511",
  "pin": "952318"
}
```

#### Example Response

```json
{
  "FeeCurrencyCode": "TRY",
  "ReceiverFeeAmountToBeEarned": 1.0,
  "Status": "InProgress",
  "TransferReferenceCode": "UN1989062511",
  "ReceiverLegalFullName": "Daniel Amokachi",
  "ReceiverPhoneNumber": "05554443322",
  "Pin": "9A3F-RMAE",
  "SenderLegalFullName": "Test User"
}
```

## Cancel InProgress

Cancels a payment operation marked as in-progress. In happy path scenario, calling
this API is not required. When payment is marked as done, it’s automatically released.
If somehow payment is not possible, this API can be called. Even if it’s not called,
payment in-progress status will be canceled automatically after 30 minutes.

#### URL

```
DELETE /union-service/payments/cancel-in-progress
```

#### Request Fields

| Name                  | Located in | Description                    | Required | Schema |
| --------------------- | ---------- | ------------------------------ | -------- | ------ |
| memberCode            | Body       | Member code.                   | No       | string |
| branchCode            | Body       | Branch Code                    | Yes      | string |
| transferReferenceCode | Body       | Unique code of the transaction | Yes      | string |
| api-version           | query      | The requested API version      | No       | string |

#### Response Fields

| Name                  | Located in | Description                    | Required | Schema |
| --------------------- | ---------- | ------------------------------ | -------- | ------ |
| TransferReferenceCode | Body       | Unique code of the transaction | Yes      | string |
| Status                | Body       | Current status of the transfer | Yes      | string |

#### Response Codes

| Code | Description                    |
| ---- | ------------------------------ |
| 200  | The transfer has been canceled |
| 400  | Problem details                |
| 404  | Transfer not found             |
| 500  | Internal Error                 |

#### Example Request

```json
{
  "memberCode": "testMember",
  "branchCode": "1212-0001",
  "transferReferenceCode": "UN1989062511"
}
```

#### Example Response

```json
{
  "TransferReferenceCode": "UN1989062511",
  "Status": "Authorized"
}
```

## Marks Payment Done

Marks payment is done which means the payment is received by the receiver
customer.

#### URL

```
PUT /union-service/payments/done
```

#### Request Fields

| Name                           | Located in | Description                       | Required | Schema |
| ------------------------------ | ---------- | --------------------------------- | -------- | ------ |
| memberCode                     | Body       | Member code.                      | Yes      | string |
| branchCode                     | Body       | Branch Code                       | Yes      | string |
| transferReferenceCode          | Body       | Unique code of the transaction    | Yes      | string |
| name.firstName                 | Body       | First name                        | No       | string |
| name.middleName                | Body       | Middle name                       | No       | string |
| name.lastName                  | Body       | Last name                         | No       | string |
| name.legalFullName             | Body       | Legal full name                   | No       | string |
| nationalityCountryCode         | Body       | Nationality country code          | No       | string |
| birthDate                      | Body       | Date of birth                     | No       | date   |
| gender                         | Body       | Gender                            | No       | string |
| phoneNumber                    | Body       | Phone number                      | No       | string |
| address.line1                  | Body       | Address line 1                    | No       | string |
| address.line2                  | Body       | Address line 2                    | No       | string |
| address.countryCode            | Body       | Country code                      | No       | string |
| address.province               | Body       | Province                          | No       | string |
| address.city                   | Body       | City                              | No       | string |
| address.postalCode             | Body       | Postal code                       | No       | string |
| address.addressType            | Body       | Type of address (e.g., Home)      | No       | string |
| identityInfo.identityType      | Body       | Type of identity (e.g., Passport) | No       | string |
| identityInfo.issuerCountryCode | Body       | Issuer country code               | No       | string |
| identityInfo.idNumber          | Body       | Identity number                   | No       | string |
| identityInfo.issuingDate       | Body       | Issuing date                      | No       | date   |
| identityInfo.expireDate        | Body       | Expiration date                   | No       | date   |

#### Response Fields

| Name                         | Located in | Description                                                                                                           | Required | Schema    |
| ---------------------------- | ---------- | --------------------------------------------------------------------------------------------------------------------- | -------- | --------- |
| TransferReferenceCode        | Body       | Unique code of the transaction                                                                                        | Yes      | string    |
| Status                       | Body       | Initializing, Authorized, Unknown, TransferStatus, BankFailed, Reversed, CanceledBySender, InProgress, Returned, Paid | Yes      | enum      |
| MemberTransferReferenceCode  | Body       | Unique transfer reference code                                                                                        | Yes      | string    |
| Description                  | Body       | Description of the transfer                                                                                           | Yes      | string    |
| ReceiveCurrencyCode          | Body       | Currency code for the received amount                                                                                 | Yes      | string    |
| ReceiveAmount                | Body       | Amount received                                                                                                       | Yes      | decimal   |
| TransferDate                 | Body       | Date of the transfer                                                                                                  | Yes      | date-time |
| PaymentDate                  | Body       | Date of payment                                                                                                       | Yes      | date-time |
| Pin                          | Body       | Pin for authentication                                                                                                | Yes      | string    |
| SenderMemberCode             | Body       | Sender's member code                                                                                                  | Yes      | string    |
| SenderBranchCode             | Body       | Sender's branch code                                                                                                  | Yes      | string    |
| SenderLegalFullName          | Body       | Sender's legal full name                                                                                              | Yes      | string    |
| SenderNationalityCountryCode | Body       | Sender's nationality country code                                                                                     | Yes      | string    |
| SenderIdNumber               | Body       | Sender's identity number                                                                                              | Yes      | string    |
| SenderAddress                | Body       | Sender's address                                                                                                      | Yes      | string    |
| SenderCountryCode            | Body       | Sender's country code                                                                                                 | Yes      | string    |
| ReceiverMemberCode           | Body       | Receiver's member code                                                                                                | Yes      | string    |
| ReceiverBranchCode           | Body       | Receiver's branch code                                                                                                | Yes      | string    |
| ReceiverLegalFullName        | Body       | Receiver's legal full name                                                                                            | Yes      | string    |
| ReceiverPhoneNumber          | Body       | Receiver's phone number                                                                                               | Yes      | string    |
| ReceiverFeeCurrencyCode      | Body       | Currency code for the receiver's fee                                                                                  | Yes      | string    |
| ReceiverFeeEarned            | Body       | Amount earned by the receiver                                                                                         | Yes      | decimal   |
| ReceiverIban                 | Body       | Receiver's IBAN                                                                                                       | Yes      | string    |
| WalletId                     | Body       | Wallet ID (if applicable)                                                                                             | No       | string    |
| ChannelType                  | Body       | Type of channel used for transfer                                                                                     | Yes      | string    |
| ReceiveInCountryCode         | Body       | Country code for the receiver                                                                                         | Yes      | string    |
| TransferReasonType           | Body       | Reason for the transfer                                                                                               | Yes      | string    |

#### Response Codes

| Code | Description                |
| ---- | -------------------------- |
| 200  | The transfer has been done |
| 400  | Problem details            |
| 404  | Transfer not found         |
| 500  | Internal Error             |

#### Example Request

##### Example-1:

```json
{
  "memberCode": "{{MemberCode}}",
  "branchCode": "{{BranchCode}}",
  "transferReferenceCode": "UN1989062515"
}
```

##### Example-2:

```json
{
  "memberCode": "M987654",
  "branchCode": "1212-0001",
  "transferReferenceCode": "UN1989062515",
  "name": {
    "firstName": "John",
    "middleName": "Alexander",
    "lastName": "Smith",
    "legalFullName": "John Alexander Smith"
  },
  "nationalityCountryCode": "GB",
  "birthDate": "1985-03-15",
  "gender": "Male",
  "phoneNumber": "+441632960961",
  "address": {
    "line1": "456 Elm St",
    "line2": "Flat 2A",
    "countryCode": "GB",
    "province": "England",
    "city": "London",
    "postalCode": "E1 6AN",
    "addressType": "Home"
  },
  "identityInfo": {
    "identityType": "Passport",
    "issuerCountryCode": "GB",
    "idNumber": "GB123456789",
    "issuingDate": "2018-04-01",
    "expireDate": "2028-04-01"
  }
}
```

#### Example Response

```json
{
  "TransferReferenceCode": "UN1989062515",
  "Status": "Paid",
  "MemberTransferReferenceCode": "11d1b4a0-13ff-4ab3-be8c-b3a7803f5322",
  "Description": "Test Transfer",
  "ReceiveCurrencyCode": "TRY",
  "ReceiveAmount": 1.0,
  "TransferDate": "2024-10-14 12:11:55",
  "PaymentDate": "2024-10-14 12:25:00",
  "Pin": "1A3F-RMAE",
  "SenderMemberCode": "member",
  "SenderBranchCode": "branch",
  "SenderLegalFullName": "Test User",
  "SenderNationalityCountryCode": "GB",
  "SenderIdNumber": "ID12345",
  "SenderAddress": "Test Line 1 Line 2 Bristol Bristol GB 34120",
  "SenderCountryCode": "IQ",
  "ReceiverMemberCode": "member",
  "ReceiverBranchCode": "branch",
  "ReceiverLegalFullName": "John Doe",
  "ReceiverPhoneNumber": "132454454128",
  "ReceiverFeeCurrencyCode": "TRY",
  "ReceiverFeeEarned": 1.0,
  "ReceiverIban": "",
  "WalletId": "",
  "ChannelType": "Transfer2Name",
  "ReceiveInCountryCode": "TR",
  "TransferReasonType": "Other"
}
```

## Cancel Payment Done

If something goes wrong during the payment done operation, this API should be
called by the receiver member. If this API also fails, the receiver member is
responsible for calling the same API at least 3 times each 30 minutes.

#### URL

```
DELETE /payments/reverse-done
```

#### Request Fields

| Name                  | Located in | Description                    | Required | Schema |
| --------------------- | ---------- | ------------------------------ | -------- | ------ |
| memberCode            | Body       | Member code.                   | Yes      | string |
| branchCode            | Body       | Branch Code                    | Yes      | string |
| transferReferenceCode | Body       | Unique code of the transaction | Yes      | string |

#### Response Fields

| Name                  | Located in | Description                    | Required | Schema |
| --------------------- | ---------- | ------------------------------ | -------- | ------ |
| TransferReferenceCode | Body       | Unique code of the transaction | Yes      | string |
| Status                | Body       | Current status of the transfer | Yes      | string |

#### Response Codes

| Code | Description                |
| ---- | -------------------------- |
| 200  | The transfer has been done |
| 400  | Problem details            |
| 404  | Transfer not found         |
| 500  | Internal Error             |

#### Example Request

```json
{
  "memberCode": "M123456",
  "branchCode": "1212-0001",
  "transferReferenceCode": "UN1989062515"
}
```

#### Example Response

```json
{
  "TransferReferenceCode": "UN1989062515",
  "Status": "Reversed"
}
```
